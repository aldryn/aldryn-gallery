var Cl=window.Cl||{};!function(a){"use strict";Cl.Gallery=new Class({options:{index:null,timeout:5e3,autoplay:!1,easing:"swing",duration:300,autoHeight:!0,autoResize:!0,engine:"fade",cls:{active:"active",wrapper:".wrapper",viewport:".viewport",elements:".item",next:".trigger-next a",previous:".trigger-previous a",navigation:"nav a"}},initialize:function(b,c){this.container=a(b),this.options=a.extend(!0,{},this.options,c),this.wrapper=this.container.find(this.options.cls.wrapper),this.viewport=this.container.find(this.options.cls.viewport),this.elements=this.container.find(this.options.cls.elements),this.navigation=this.container.find(this.options.cls.navigation),this.triggers={next:this.container.find(this.options.cls.next),previous:this.container.find(this.options.cls.previous)},this.index=null,this.bound=this.elements.length,this.direction="",this.queue=!1,this.autoplay=!1,this.timer=function(){},this.callbacks={},this.elements.length>0&&this._setup()},_setup:function(){var b=this;this.options.autoHeight&&this._setHeight(),this.triggers.next.on("click",function(a){a.preventDefault(),b.options.autoplay||(b.options.timeout=null),b.next()}),this.triggers.previous.on("click",function(a){a.preventDefault(),b.options.autoplay||(b.options.timeout=null),b.previous()}),this.navigation.on("click",function(c){c.preventDefault(),b.options.autoplay||(b.options.timeout=null),b.move(b.navigation.index(a(this)),"random")}),this.options.autoResize&&this._autoResize(),b.elements.length>1&&(this.navigation.parent().show(),this.triggers.next.parent().show(),this.triggers.previous.parent().show()),this.move(this.options.index||0,"setup")},next:function(){this.move(this.index+1,"next"),this._fire("next")},previous:function(){this.move(this.index-1,"previous"),this._fire("previous")},move:function(a,b){if(!("setup"!==b&&this.elements.length<=1)){var c=this;if(this.queue)return!1;if(this.options.autoHeight&&this._setHeight(),a===this.index)return!1;this.index=this._setIndex(a),this.autoplay&&this.stop(),this.options.timeout>0&&this.play(),this.direction=b||"next",this._accessibility(),this.navigation.removeClass(this.options.cls.active),this.navigation.eq(this.index).addClass(this.options.cls.active),this.engine[this.options.engine].call(this),this._fire("move"),setTimeout(function(){c.queue=!1},this.options.duration)}},play:function(){var a=this;this.timer=setInterval(function(){a.next()},this.options.timeout),this.autoplay=!0,this._fire("play")},stop:function(){clearInterval(this.timer),this.autoplay=!1,this._fire("stop")},update:function(){this.move(this.index),this._fire("update")},engine:{fade:function(){this.queue=!0,"setup"===this.direction?(this.queue=!1,this.elements.hide(),this.elements.eq(0).show()):(this.elements.fadeOut(this.options.duration,this.options.transition),this.elements.eq(this.index).fadeIn(this.options.duration,this.options.transition))},slide:function(){if(this.queue=!0,"setup"===this.direction){this.elements.show().css("left",-9999);var b=this.elements.eq(this.index);b.css("left",0).show(),this.queue=!1}else{var c=this.viewport.outerWidth(),d=this.elements.filter(function(){return 0===parseInt(a(this).css("left"))});d.animate({left:"previous"===this.direction?c:-c},this.options.duration,this.options.transition,function(){a(this).css("left",-9999)}),this.elements.eq(this.index).css("left","previous"===this.direction?-c:c).animate({left:0},this.options.duration,this.options.transition)}}},_setIndex:function(a){return 0>a&&(a=this.bound-1),a>=this.bound&&(a=0),a},_setHeight:function(){var b=null;this.elements.each(function(c,d){var e=a(d);b<e.outerHeight(!0)&&(b=e.outerHeight(!0))}),this.wrapper.css("height",b)},_autoResize:function(){var b=this;a(window).on("resize.cl-gallery",function(){b._setHeight()})},_accessibility:function(){this.elements.attr("aria-hidden",!0).attr("aria-selected",!1),this.elements.eq(this.index).attr("aria-hidden",!1).attr("aria-selected",!0)},_fire:function(a){return void 0===this.callbacks[a]?!1:(this.callbacks[a](this),void 0)}})}(jQuery);